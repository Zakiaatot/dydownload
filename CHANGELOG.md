# 更新日志

所有值得注意的项目变更都将记录在此文件中。

本项目遵循[语义化版本](https://semver.org/lang/zh-CN/)规范。

## [1.1.4] - 2024-12-28

### 修复问题
- 🐛 **修复Multipart文件上传缺失字段问题**: 解决文本字段被忽略的关键bug
  - 重写multipart/form-data处理逻辑，支持文件和文本字段混合
  - 修复只处理第一个文件字段后就跳出循环的问题
  - 现在可以正确发送所有字段（如files文件 + path路径参数）
  - 完整的multipart边界和格式构建

### 技术改进
- 🔧 **完整的Multipart实现**: 支持多文件+多文本字段的复杂表单
- 📊 **更详细的字段日志**: 显示所有处理的字段信息
- 🛡️ **更好的错误处理**: 单个字段错误不影响其他字段处理

## [1.1.3] - 2024-12-28

### 新增功能
- 🔍 **详细Webhook日志系统**: 大幅增强控制台日志功能
  - 📡 HTTP Webhook请求详情（URL、方法、请求头、请求体、响应等）
  - ⚡ 命令 Webhook执行详情（命令、参数、输出、错误、进程信息等）
  - 📊 批量执行统计和性能监控
  - 🔄 重试机制的完整过程记录
  - 🎨 彩色emoji标识，提升日志可读性

### 技术改进
- 🆔 **执行追踪**: 为每个请求分配唯一ID便于调试追踪
- ⏱️ **性能监控**: 详细记录各阶段执行时间和资源使用
- 🔧 **调试友好**: 结构化日志输出，便于问题排查
- 📈 **统计信息**: 批量执行成功率和耗时统计

### 日志功能详情
- 请求前：显示配置信息、上下文变量、处理过程
- 请求中：实时输出进度、状态变化、数据传输
- 请求后：完整响应信息、执行结果、性能数据
- 错误时：详细错误信息、重试过程、失败原因

## [1.1.2] - 2024-12-19

### 修复问题
- 🐛 **彻底修复Webhook模块依赖问题**: 解决 "Cannot find module 'node-fetch'" 错误
  - 使用Electron内置的`net`模块替代`node-fetch`
  - 移除所有外部HTTP依赖，确保打包后完全正常运行
  - 重写multipart/form-data实现，不再依赖`form-data`模块
  - 完全基于Electron内置API，无任何外部依赖

### 技术改进
- ⚡ 更高性能：使用Chromium网络栈
- 📦 更小体积：移除外部HTTP库依赖
- 🛡️ 更安全稳定：基于Electron内置模块
- 🔧 更好兼容性：避免所有打包后的模块加载问题

### 移除依赖
- ❌ 移除 `form-data` 依赖
- ❌ 移除 `node-fetch` 依赖

---

## [1.1.1] - 2024-12-19

### 修复问题
- 🐛 **修复打包后Webhook功能报错**: 解决 "Cannot find module 'form-data'" 错误
  - 将HTTP请求和命令执行从渲染进程移至主进程
  - 通过IPC通信确保模块依赖正确解析
  - 修复multipart/form-data文件上传功能
  - 保证打包后应用的稳定运行

### 技术改进
- 🔧 重构Webhook执行架构，提高安全性
- 📡 优化IPC通信机制
- 🛡️ 增强错误处理和超时控制

---

## [1.1.0] - 2024-12-19

### 新增功能
- ✨ **新增文件命名规则**: 视频标识符命名方式
  - 支持直接使用抖音链接中的视频标识符作为文件名
  - 例如：`https://v.douyin.com/dd80aeXR4M8` → `dd80aeXR4M8.mp4`
  - 提供更简洁和直观的文件命名方式
  - 当标识符提取失败时自动回退到时间戳命名

### 改进优化
- 🔧 完善文件命名系统的容错处理
- 📝 更新相关文档说明

### 技术细节
- 新增 `extractVideoIdentifier()` 方法用于提取视频标识符
- 支持带尾部斜杠和不带尾部斜杠的链接格式
- 增强错误处理和日志记录

---

## [1.0.0] - 2024-12-19

### 🎉 首次发布

#### 核心功能
- 🔄 **智能剪贴板监听**: 实时检测抖音视频链接
- 📹 **视频解析下载**: 自动解析并下载抖音视频
- ⚙️ **灵活设置管理**: 自定义下载目录和命名规则
- 🔗 **Webhook集成**: 支持HTTP推送和命令执行
- 📊 **详细日志系统**: 完整的操作记录和统计

#### 文件命名规则
- 时间戳_原始名称: `1234567890_douyin_video.mp4`
- 视频标题_时间戳: `我的视频_1234567890.mp4`
- MD5哈希值: `abc123def456.mp4`
- 序号_时间戳: `video_0001_1234567890.mp4`

#### 用户界面
- 🎨 现代化设计，简洁美观
- 📱 响应式布局，适配不同尺寸
- 🔄 平滑的页面切换动画
- 🛠️ 开发者友好的调试工具

#### 技术架构
- ⚡ 基于 Electron 27.3.11
- 🔥 支持热加载开发模式
- 📦 跨平台构建支持
- 🔒 安全的文件操作和命令执行

#### 开发工具
- 🚀 开发模式指示器
- 🛠️ 丰富的调试API
- ⌨️ 快捷键支持（F5刷新，F12开发者工具）
- 📖 详细的开发文档

### 项目文档
- 📋 完整的 README.md
- 📚 详细的 DEVELOPMENT.md
- 📄 MIT 开源许可证
- 🔧 完善的 .gitignore 配置

### 依赖项
- **核心依赖**: 无（完全基于Electron内置模块）
- **开发依赖**:
  - `electron`: ^27.3.11
  - `electron-builder`: ^24.6.4
  - `electron-reload`: ^2.0.0-alpha.1 