# æ„å»ºæŒ‡å—

æœ¬æŒ‡å—å¸®åŠ©ä½ æ­£ç¡®æ„å»ºå’Œæ‰“åŒ… DyDownload åº”ç”¨ã€‚

## ğŸš€ å¿«é€Ÿæ„å»º

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. æµ‹è¯•åº”ç”¨
```bash
# å¼€å‘æ¨¡å¼æµ‹è¯•
npm run dev

# ç”Ÿäº§æ¨¡å¼æµ‹è¯•
npm start
```

### 3. æ„å»ºåº”ç”¨
```bash
# æ„å»ºå½“å‰å¹³å°
npm run build

# æ„å»ºç‰¹å®šå¹³å°
npm run build-win    # Windows
npm run build-mac    # macOS  
npm run build-linux  # Linux
```

## ğŸ”§ æ„å»ºé…ç½®

### Electron Builder é…ç½®
é¡¹ç›®å·²åœ¨ `package.json` ä¸­é…ç½®äº† `electron-builder`ï¼š

```json
{
  "build": {
    "appId": "com.dydownload.app",
    "productName": "æŠ–éŸ³ä¸‹è½½å·¥å…·",
    "directories": {
      "output": "dist"
    },
    "files": [
      "**/*",
      "!node_modules/**/*",
      "!dist/**/*", 
      "!.git/**/*"
    ]
  }
}
```

### é‡è¦è¯´æ˜
- âœ… **å·²å½»åº•ä¿®å¤**: v1.1.2 å®Œå…¨è§£å†³æ‰“åŒ…åæ¨¡å—ä¾èµ–é—®é¢˜
- ğŸ”’ **å®‰å…¨æ¶æ„**: WebhookåŠŸèƒ½ä½¿ç”¨ä¸»è¿›ç¨‹-IPCé€šä¿¡æ¶æ„
- âš¡ **é›¶ä¾èµ–**: å®Œå…¨åŸºäºElectronå†…ç½®æ¨¡å—ï¼Œæ— å¤–éƒ¨HTTPåº“ä¾èµ–
- ğŸ“¦ **å®Œç¾æ‰“åŒ…**: æ‰€æœ‰åŠŸèƒ½åœ¨æ‰“åŒ…åå®Œå…¨æ­£å¸¸å·¥ä½œ

## ğŸ§ª æ„å»ºå‰æµ‹è¯•

### éªŒè¯æ ¸å¿ƒåŠŸèƒ½
1. **å‰ªè´´æ¿ç›‘å¬**: æµ‹è¯•æŠ–éŸ³é“¾æ¥è¯†åˆ«
2. **è§†é¢‘è§£æ**: éªŒè¯APIè°ƒç”¨æ­£å¸¸
3. **æ–‡ä»¶ä¸‹è½½**: æµ‹è¯•å„ç§å‘½åè§„åˆ™
4. **WebhookåŠŸèƒ½**: éªŒè¯HTTPå’Œå‘½ä»¤æ‰§è¡Œ
5. **è®¾ç½®ç®¡ç†**: æµ‹è¯•é…ç½®ä¿å­˜å’ŒåŠ è½½

### æµ‹è¯•å‘½ä»¤
```bash
# åœ¨å¼€å‘è€…æ§åˆ¶å°ä¸­è¿è¡Œ
devUtils.info()              // æŸ¥çœ‹åº”ç”¨çŠ¶æ€
devUtils.testNamingRules()   // æµ‹è¯•æ–‡ä»¶å‘½å
devUtils.testDownload()      // æµ‹è¯•ä¸‹è½½åŠŸèƒ½

// æµ‹è¯•Webhook IPCé€šä¿¡
const { ipcRenderer } = require('electron');
await ipcRenderer.invoke('execute-http-webhook', {
  url: 'https://httpbin.org/post',
  method: 'POST',
  body: { type: 'json', data: { test: true } }
}, { title: 'Test' });
```

## ğŸ“ æ„å»ºè¾“å‡º

æ„å»ºå®Œæˆåï¼Œæ–‡ä»¶ä½äº `dist/` ç›®å½•ï¼š

### macOS
- `dist/mac/æŠ–éŸ³ä¸‹è½½å·¥å…·.app` - åº”ç”¨ç¨‹åºåŒ…
- `dist/æŠ–éŸ³ä¸‹è½½å·¥å…·-1.1.2.dmg` - å®‰è£…é•œåƒ

### Windows  
- `dist/win-unpacked/` - è§£å‹ç‰ˆåº”ç”¨
- `dist/æŠ–éŸ³ä¸‹è½½å·¥å…· Setup 1.1.2.exe` - å®‰è£…ç¨‹åº

### Linux
- `dist/æŠ–éŸ³ä¸‹è½½å·¥å…·-1.1.2.AppImage` - AppImageæ ¼å¼

## âš ï¸ å¸¸è§é—®é¢˜

### 1. æ¨¡å—ç¼ºå¤±é”™è¯¯
**é—®é¢˜**: `Cannot find module 'xxx'`  
**è§£å†³**: ç¡®ä¿ä½¿ç”¨ v1.1.2+ ç‰ˆæœ¬ï¼Œå·²å½»åº•ä¿®å¤æ­¤é—®é¢˜

### 2. æ„å»ºå¤±è´¥
**é—®é¢˜**: æ„å»ºè¿‡ç¨‹ä¸­å‡ºé”™  
**è§£å†³**: 
```bash
# æ¸…ç†å¹¶é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
npm run build
```

### 3. åº”ç”¨æ— æ³•å¯åŠ¨
**é—®é¢˜**: æ‰“åŒ…ååº”ç”¨å¯åŠ¨å¤±è´¥  
**è§£å†³**: æ£€æŸ¥æ˜¯å¦æœ‰è·¯å¾„é—®é¢˜ï¼Œç¡®ä¿èµ„æºæ–‡ä»¶æ­£ç¡®æ‰“åŒ…

### 4. WebhookåŠŸèƒ½å¼‚å¸¸
**é—®é¢˜**: æ‰“åŒ…åWebhookä¸å·¥ä½œ  
**è§£å†³**: v1.1.2+ å·²å½»åº•ä¿®å¤ï¼Œä½¿ç”¨Electronå†…ç½®æ¨¡å—ç¡®ä¿å®Œç¾å…¼å®¹

## ğŸ” è°ƒè¯•æ„å»ºé—®é¢˜

### å¯ç”¨è¯¦ç»†æ—¥å¿—
```bash
# æ„å»ºæ—¶å¯ç”¨è¯¦ç»†è¾“å‡º
DEBUG=electron-builder npm run build
```

### æ£€æŸ¥æ‰“åŒ…å†…å®¹
```bash
# macOS - æŸ¥çœ‹åº”ç”¨å†…å®¹
open dist/mac/æŠ–éŸ³ä¸‹è½½å·¥å…·.app/Contents/Resources/

# Windows - æŸ¥çœ‹åº”ç”¨ç›®å½•  
explorer dist/win-unpacked/
```

### æµ‹è¯•æ‰“åŒ…åº”ç”¨
æ„å»ºå®Œæˆåï¼Œå…ˆæµ‹è¯•æ‰“åŒ…çš„åº”ç”¨ï¼š
1. è¿è¡Œæ‰“åŒ…åçš„åº”ç”¨
2. æµ‹è¯•æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
3. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
4. éªŒè¯æ–‡ä»¶è·¯å¾„å’Œæƒé™

## ğŸ“‹ å‘å¸ƒæ£€æŸ¥æ¸…å•

å‘å¸ƒå‰ç¡®ä¿ï¼š
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] CHANGELOG.md å·²æ›´æ–°
- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ‰“åŒ…åº”ç”¨è¿è¡Œæ­£å¸¸
- [ ] æ–‡æ¡£æ›´æ–°å®Œæ•´
- [ ] æ²¡æœ‰å¼€å‘æ¨¡å¼ä»£ç æ®‹ç•™

## ğŸš€ è‡ªåŠ¨åŒ–æ„å»º

å¯ä»¥è®¾ç½®GitHub Actionsç­‰CI/CDï¼š

```yaml
# .github/workflows/build.yml
name: Build
on: [push, pull_request]
jobs:
  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [macos-latest, windows-latest, ubuntu-latest]
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '16'
      - run: npm install
      - run: npm run build
```

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

1. **å‡å°åŒ…ä½“ç§¯**: æ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶
2. **ä»£ç ç­¾å**: ä¸ºå‘å¸ƒç‰ˆæœ¬æ·»åŠ ä»£ç ç­¾å
3. **è‡ªåŠ¨æ›´æ–°**: é›†æˆelectron-updater
4. **é”™è¯¯æŠ¥å‘Š**: æ·»åŠ å´©æºƒæŠ¥å‘Šç³»ç»Ÿ
5. **æ€§èƒ½ç›‘æ§**: æ·»åŠ æ€§èƒ½æŒ‡æ ‡æ”¶é›† 